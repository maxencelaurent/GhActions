name: Share data between jobs

on: [push]

jobs:
  job_1:
    name: Add 3 and 7
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run: |
          expr 3 + 7 > math-homework.txt
      - name: Upload math result for job 1
        uses: actions/upload-artifact@v3
        with:
          name: homework
          path: math-homework.txt

  job_2:
    name: Multiply by 9
    needs: job_1
    runs-on: ubuntu-latest
    steps:
      - name: Download math result for job 1
        uses: actions/download-artifact@v3
        with:
          name: homework
      - shell: bash
        run: |
          if [ -e math-homework.txt ]; then
            echo file exists
          else
            echo file do not exist
          fi

  job_3:
    name: downlod programatically
    needs: job_1
    runs-on: ubuntu-latest
    steps:
      -
        id: Checkout
        uses: actions/checkout@v3
      -
        name: node setup
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn
          cache-dependency-path: .github/actions/load-artifacts/yarn.lock
      -
        name: yarn install
        run: yarn --cwd .github/actions/load-artifacts/ install 
      -
        name: yarn build
        run: yarn --cwd .github/actions/load-artifacts/ build
      -
        name: load all artifacts
        uses: ./.github/actions/load-artifacts
      -
        name: load some artifacts
        uses: ./.github/actions/load-artifacts
        with:
          artifacts: |
            homework

